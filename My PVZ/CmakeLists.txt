cmake_minimum_required(VERSION 3.14)
project(pj2023)
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED True)
# 设置 SDL2 的路径
set(SDL2_PATH "./SDL2-2.28.4/x86_64-w64-mingw32")

# 包含头文件目录
include_directories(${SDL2_PATH}/include)
include_directories(./include)

# 设置源文件目录，以方便管理和引用
file(GLOB_RECURSE SOURCE_FILES 
     "./src/*.cpp"
     "./src/plants/*.cpp"
     "./src/zombies/*.cpp")

# 添加要编译的源文件
add_executable(Game ${SOURCE_FILES})

# 查找 SDL2 库及其扩展库
find_library(SDL2_LIB NAME SDL2 PATHS ${SDL2_PATH}/lib NO_DEFAULT_PATH)
find_library(SDL2_MAIN_LIB NAME SDL2main PATHS ${SDL2_PATH}/lib NO_DEFAULT_PATH)
find_library(SDL2_TTF_LIB NAME SDL2_ttf PATHS ${SDL2_PATH}/lib NO_DEFAULT_PATH)
find_library(SDL2_IMAGE_LIB NAME SDL2_image PATHS ${SDL2_PATH}/lib NO_DEFAULT_PATH)
find_library(SDL2_MIXER_LIB NAME SDL2_mixer PATHS ${SDL2_PATH}/lib NO_DEFAULT_PATH)

# 指定链接库
target_link_libraries(Game -lmingw32 ${SDL2_MAIN_LIB} ${SDL2_LIB} ${SDL2_TTF_LIB} ${SDL2_IMAGE_LIB} ${SDL2_MIXER_LIB})

# 如果是使用 MinGW 编译器，且你希望隐藏控制台窗口，可以添加 -mwindows 标志
if(MINGW)
    set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} ")
endif()
